# Application-wide configuration
database:
  host: mariadb
  user: root
  database: 3t

redis:
  host: redis
  port: 6379
  db: 0
  streams:
    balance_updates: "balance:updated"
    price_updates: "prices:updated"

celery:
  schedules:
    update_balance: 15.0
    schedule_market_data_fetching: 30.0 # Runs every minute to check for needed updates

# Exchange configuration
exchanges:
  hyperliquid:
    # Optional proxy configuration for bypassing IP restrictions
    proxy:
        - "http://3tsgp01.trisagion.xyz:8080/"
        - "http://3tche01.trisagion.xyz:8080/"
        - "http://cors-proxy:8080/"
    origin: "https://trisagion.finance"
    # Polling configuration for non-websocket price updates
    poll_interval: 1.0  # seconds between price polls
    poll_batch_size: 10  # number of symbols to fetch per batch

# Exchange and product configuration can be managed here
# or dynamically from the database.
market_data:
  timeframes:
    - "1m"
    - "4h"
  concurrency_limit: 10
  lookback_bars:
    default: 20
    "4h": 50
    "1m": 20

# Reconciliation Engine Configuration
reconciliation_engine:
  # How often to run reconciliation checks (in seconds)
  rebalance_frequency: 300.0 # in seconds
  
  # Risk position size as a percentage of total balance (golden ratio based)
  risk_pos_percentage: 0.000026967

  # Kelly Strategy Configuration
  kelly_threshold: 0.5  # maximum Kelly performance scaling threshold (ex: 0.5 = 50%)
  
  # Symbols to manage 
  symbols:
    - "BTC/USDC:USDC"
    - "PAXG/USDC:USDC"
    - "HYPE/USDC:USDC"
    - "APT/USDC:USDC"
    - "ZEC/USDC:USDC"

  # Observer nodes for consensus validation
  observer_nodes:
    - "http://3tsgp01.trisagion.xyz:8001/3T-observer.json"
    - "http://3tche01.trisagion.xyz:8001/3T-observer.json"
    - "http://exchange-observer:8001/3T-observer.json"
  
  # Order gateway URL for trade execution
  order_gateway_url: "http://order-gateway:8002"
  
  # Position staleness timeout in seconds (how old positions can be before ignored)
  position_staleness_timeout: 60
  
  # Minimum trade value in USD to execute orders (avoids dust trades)
  minimum_trade_threshold: 150.0
  
  # Order gateway request timeout in seconds
  order_timeout: 30

# Take Profit Configuration
take_profit:
  threshold: 0.0577215664
  reward_multiple: 10

# Health Monitor Configuration (in seconds)
health_monitor:
  polling_interval: 0.5
  polling_threshold: 90.0

observability:
  # Sampling rate for noisy tasks. 1.0 = 100%, 0.001 = 0.1%
  sampling_rate: 0.000001
